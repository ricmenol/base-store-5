import{r as t,m as I,V as Ie,bu as L,I as ve,x as ut,T as Ce,X as dt,ai as Se,z as ke,bp as ft,B as we,cA as mt,b as oe,a6 as gt,u as bt,j as v,H as pt,A as Te,L as ht}from"./index-DkzW1lbC.js";import{C as $e}from"./checkbox-meFL0Q5O.js";import{f as Ne,u as xt,g as Et,c as je}from"./index-C80j_Nkx.js";import{u as Ct}from"./chunk-C76H5USB-C8KApNCG.js";import{u as St,s as Ee,a as wt}from"./chunk-BKWQ2FHJ-QjmO9jF9.js";import{C as G}from"./command-bar-CzjD0zPo.js";import{T as V,D as vt}from"./table-yxlhz450.js";import{A as yt,a as Dt}from"./arrow-up-mini-U4e2cj7E.js";import{D as _e}from"./date-picker-q6BpD6Yt.js";import{P as le}from"./popover-CkT8s_eK.js";var kt=Object.defineProperty,re=Object.getOwnPropertySymbols,Re=Object.prototype.hasOwnProperty,Oe=Object.prototype.propertyIsEnumerable,Fe=(n,e,a)=>e in n?kt(n,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):n[e]=a,Tt=(n,e)=>{for(var a in e)Re.call(e,a)&&Fe(n,a,e[a]);if(re)for(var a of re(e))Oe.call(e,a)&&Fe(n,a,e[a]);return n},Nt=(n,e)=>{var a={};for(var l in n)Re.call(n,l)&&e.indexOf(l)<0&&(a[l]=n[l]);if(n!=null&&re)for(var l of re(n))e.indexOf(l)<0&&Oe.call(n,l)&&(a[l]=n[l]);return a};const ze=t.forwardRef((n,e)=>{var a=n,{color:l="currentColor"}=a,r=Nt(a,["color"]);return t.createElement("svg",Tt({xmlns:"http://www.w3.org/2000/svg",width:15,height:15,fill:"none",ref:e},r),t.createElement("path",{stroke:l,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"m8.833 12.611-2.666 1.333V7.5L1.944 1.944h11.112L8.833 7.5z"}))});ze.displayName="Funnel";function O({className:n,...e}){return t.createElement("div",{className:I("bg-ui-bg-component animate-pulse rounded-md",n),...e})}const He=t.createContext(null),z=()=>{const n=t.useContext(He);if(!n)throw new Error("useDataTableContext must be used within a DataTableContextProvider");return n},Be=n=>{const{instance:e}=z(),a=e.getCommands(),l=e.getRowSelection(),r=Object.keys(l||[]).length,o=a&&a.length>0&&r>0;function i(p){return typeof n.selectedLabel=="function"?n.selectedLabel(p):n.selectedLabel}return!a||a.length===0?null:t.createElement(G,{open:o},t.createElement(G.Bar,null,n.selectedLabel&&t.createElement(t.Fragment,null,t.createElement(G.Value,null,i(r)),t.createElement(G.Seperator,null)),a.map((p,s)=>t.createElement(t.Fragment,{key:s},t.createElement(G.Command,{key:p.label,action:()=>p.action(l),label:p.label,shortcut:p.shortcut}),s<a.length-1&&t.createElement(G.Seperator,null)))))};Be.displayName="DataTable.CommandBar";const Ve=n=>{const{instance:e}=z(),a=Object.keys(e.getFiltering()),l=e.getFilters().filter(o=>!a.includes(o.id));if(!a.length&&!l.length)throw new Error("DataTable.FilterMenu was rendered but there are no filters to apply. Make sure to pass filters to 'useDataTable'");const r=n.tooltip?Ie:t.Fragment;return e.showSkeleton?t.createElement(_t,null):t.createElement(L,null,t.createElement(r,{content:n.tooltip,hidden:l.length===0},t.createElement(L.Trigger,{asChild:!0,disabled:l.length===0},t.createElement(ve,{size:"small"},t.createElement(ze,null)))),t.createElement(L.Content,{side:"bottom"},l.map(o=>t.createElement(L.Item,{key:o.id,onClick:()=>{e.addFilter({id:o.id,value:void 0})}},o.label))))};Ve.displayName="DataTable.FilterMenu";const _t=()=>t.createElement(O,{className:"size-7"}),Ue=n=>{const{instance:e}=z();if(!e.enablePagination)throw new Error("DataTable.Pagination was rendered but pagination is not enabled. Make sure to pass pagination to 'useDataTable'");return e.showSkeleton?t.createElement(Ft,null):t.createElement(V.Pagination,{translations:n.translations,className:"flex-shrink-0",canNextPage:e.getCanNextPage(),canPreviousPage:e.getCanPreviousPage(),pageCount:e.getPageCount(),count:e.rowCount,nextPage:e.nextPage,previousPage:e.previousPage,pageIndex:e.pageIndex,pageSize:e.pageSize})};Ue.displayName="DataTable.Pagination";const Ft=()=>t.createElement("div",null,t.createElement("div",{className:"flex items-center justify-between p-4"},t.createElement(O,{className:"h-7 w-[138px]"}),t.createElement("div",{className:"flex items-center gap-x-2"},t.createElement(O,{className:"h-7 w-24"}),t.createElement(O,{className:"h-7 w-11"}),t.createElement(O,{className:"h-7 w-11"})))),Ke=n=>{const{className:e,...a}=n,{instance:l}=z();if(!l.enableSearch)throw new Error("DataTable.Search was rendered but search is not enabled. Make sure to pass search to 'useDataTable'");return l.showSkeleton?t.createElement(Pt,null):t.createElement(ut,{size:"small",type:"search",value:l.getSearch(),onChange:r=>l.onSearchChange(r.target.value),className:I({"pr-[calc(15px+2px+8px)]":l.isLoading},e),...a})};Ke.displayName="DataTable.Search";const Pt=()=>t.createElement(O,{className:"h-7 w-[128px]"}),We=n=>{const{instance:e}=z(),a=e.getAllColumns().filter(s=>s.getCanSort()),l=e.getSorting(),r=t.useMemo(()=>a.find(s=>s.id===(l==null?void 0:l.id)),[a,l]),o=t.useCallback(s=>{e.setSorting(c=>{var u;return{id:s,desc:(u=c==null?void 0:c.desc)!==null&&u!==void 0?u:!1}})},[e]),i=t.useCallback(s=>{e.setSorting(c=>{var u;return{id:(u=c==null?void 0:c.id)!==null&&u!==void 0?u:"",desc:s==="true"}})},[e]);if(!e.enableSorting)throw new Error("DataTable.SortingMenu was rendered but sorting is not enabled. Make sure to pass sorting to 'useDataTable'");if(!a.length)throw new Error("DataTable.SortingMenu was rendered but there are no sortable columns. Make sure to set `enableSorting` to true on at least one column.");if(e.showSkeleton)return t.createElement(Mt,null);const p=n.tooltip?Ie:t.Fragment;return t.createElement(L,null,t.createElement(p,{content:n.tooltip},t.createElement(L.Trigger,{asChild:!0},t.createElement(ve,{size:"small"},t.createElement(vt,null)))),t.createElement(L.Content,{side:"bottom"},t.createElement(L.RadioGroup,{value:l==null?void 0:l.id,onValueChange:o},a.map(s=>t.createElement(L.RadioItem,{onSelect:c=>c.preventDefault(),value:s.id,key:s.id},Lt(s)))),l&&t.createElement(t.Fragment,null,t.createElement(L.Separator,null),t.createElement(L.RadioGroup,{value:l!=null&&l.desc?"true":"false",onValueChange:i},t.createElement(L.RadioItem,{onSelect:s=>s.preventDefault(),value:"false",className:"flex items-center gap-2"},t.createElement(yt,{className:"text-ui-fg-subtle"}),Pe("asc",r)),t.createElement(L.RadioItem,{onSelect:s=>s.preventDefault(),value:"true",className:"flex items-center gap-2"},t.createElement(Dt,{className:"text-ui-fg-subtle"}),Pe("desc",r))))))};We.displayName="DataTable.SortingMenu";function Lt(n){var e,a,l;const r=n.columnDef.meta;let o;return typeof n.columnDef.header=="string"&&(o=n.columnDef.header),(l=(a=(e=r==null?void 0:r.___sortMetaData)===null||e===void 0?void 0:e.sortLabel)!==null&&a!==void 0?a:o)!==null&&l!==void 0?l:n.id}function Pe(n,e){var a,l,r,o;if(!e)return null;const i=e.columnDef.meta;switch(n){case"asc":return(l=(a=i==null?void 0:i.___sortMetaData)===null||a===void 0?void 0:a.sortAscLabel)!==null&&l!==void 0?l:"A-Z";case"desc":return(o=(r=i==null?void 0:i.___sortMetaData)===null||r===void 0?void 0:r.sortDescLabel)!==null&&o!==void 0?o:"Z-A"}}const Mt=()=>t.createElement(O,{className:"size-7"});var U;(function(n){n.EMPTY="EMPTY",n.FILTERED_EMPTY="FILTERED_EMPTY",n.POPULATED="POPULATED"})(U||(U={}));const Ye=n=>{const e=n.direction==="asc",a=n.direction==="desc",l=e||a;return t.createElement("svg",{width:"16",height:"15",viewBox:"0 0 16 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:I("opacity-0 transition-opacity group-hover:opacity-100",{"opacity-100":l})},t.createElement("path",{d:"M5.82651 5.75C5.66344 5.74994 5.50339 5.71269 5.36308 5.64216C5.22277 5.57162 5.10736 5.47039 5.02891 5.34904C4.95045 5.22769 4.91184 5.09067 4.9171 4.95232C4.92236 4.81397 4.97131 4.67936 5.05882 4.56255L7.64833 1.10788C7.73055 0.998207 7.84403 0.907911 7.97827 0.845354C8.11252 0.782797 8.26318 0.75 8.41632 0.75C8.56946 0.75 8.72013 0.782797 8.85437 0.845354C8.98862 0.907911 9.1021 0.998207 9.18432 1.10788L11.7744 4.56255C11.862 4.67939 11.9109 4.81405 11.9162 4.95245C11.9214 5.09085 11.8827 5.2279 11.8042 5.34926C11.7257 5.47063 11.6102 5.57185 11.4698 5.64235C11.3294 5.71285 11.1693 5.75003 11.0061 5.75H5.82651Z",className:I("fill-ui-fg-muted",{"fill-ui-fg-subtle":e})}),t.createElement("path",{d:"M11.0067 9.25C11.1698 9.25006 11.3299 9.28731 11.4702 9.35784C11.6105 9.42838 11.7259 9.52961 11.8043 9.65096C11.8828 9.77231 11.9214 9.90933 11.9162 10.0477C11.9109 10.186 11.8619 10.3206 11.7744 10.4374L9.18492 13.8921C9.10271 14.0018 8.98922 14.0921 8.85498 14.1546C8.72074 14.2172 8.57007 14.25 8.41693 14.25C8.26379 14.25 8.11312 14.2172 7.97888 14.1546C7.84464 14.0921 7.73115 14.0018 7.64894 13.8921L5.05882 10.4374C4.97128 10.3206 4.92233 10.1859 4.9171 10.0476C4.91186 9.90915 4.95053 9.7721 5.02905 9.65074C5.10758 9.52937 5.22308 9.42815 5.36347 9.35765C5.50387 9.28715 5.664 9.24997 5.82712 9.25H11.0067Z",className:I("fill-ui-fg-muted",{"fill-ui-fg-subtle":a})}))};Ye.displayName="DataTable.SortingIcon";const Je=n=>{const e=t.useRef(null),a=t.useRef(!1),[l,r]=t.useState(!1),o=t.useRef(null),{instance:i}=z(),p=i.pageIndex,s=i.getAllColumns(),c=s.find(h=>h.id==="select"),u=s.find(h=>h.id==="action");t.useEffect(()=>{const h=b=>{const w=jt();if(b.key.toLowerCase()==="x"&&e&&!a.current&&!w){a.current=!0;const S=i.getRowModel().rows.find(P=>P.id===e.current);S&&S.getCanSelect()&&S.toggleSelected()}},g=b=>{b.key.toLowerCase()==="x"&&(a.current=!1)};return document.addEventListener("keydown",h),document.addEventListener("keyup",g),()=>{document.removeEventListener("keydown",h),document.removeEventListener("keyup",g)}},[e,i]);const C=h=>{h.currentTarget.scrollLeft>0?r(!0):r(!1)};return t.useEffect(()=>{var h;(h=o.current)===null||h===void 0||h.scroll({top:0,left:0})},[p]),i.showSkeleton?t.createElement($t,{pageSize:i.pageSize}):t.createElement("div",{className:"flex w-full flex-1 flex-col overflow-hidden"},i.emptyState===U.POPULATED&&t.createElement("div",{ref:o,onScroll:C,className:"min-h-0 w-full flex-1 overflow-auto overscroll-none border-y"},t.createElement(V,{className:"relative isolate w-full"},t.createElement(V.Header,{className:"shadow-ui-border-base sticky inset-x-0 top-0 z-[1] w-full border-b-0 border-t-0 shadow-[0_1px_1px_0]",style:{transform:"translate3d(0,0,0)"}},i.getHeaderGroups().map(h=>t.createElement(V.Row,{key:h.id,className:I("border-b-0",{"[&_th:last-of-type]:w-[1%] [&_th:last-of-type]:whitespace-nowrap":u,"[&_th:first-of-type]:w-[1%] [&_th:first-of-type]:whitespace-nowrap":c})},h.headers.map((g,b)=>{const w=g.column.getCanSort(),S=g.column.getIsSorted(),P=g.column.getToggleSortingHandler(),y=g.id==="action",A=g.id==="select",D=y||A,x=w?"button":"div",N=c?b===1:b===0;return t.createElement(V.HeaderCell,{key:g.id,className:I("whitespace-nowrap",{"w-[calc(20px+24px+24px)] min-w-[calc(20px+24px+24px)] max-w-[calc(20px+24px+24px)]":A,"w-[calc(28px+24px+4px)] min-w-[calc(28px+24px+4px)] max-w-[calc(28px+24px+4px)]":y,"after:absolute after:inset-y-0 after:right-0 after:h-full after:w-px after:bg-transparent after:content-['']":N,"after:bg-ui-border-base":l&&N,"bg-ui-bg-subtle sticky":N||A,"left-0":A||N&&!c,"left-[calc(20px+24px+24px)]":N&&c}),style:D?void 0:{width:g.column.columnDef.size,maxWidth:g.column.columnDef.maxSize,minWidth:g.column.columnDef.minSize}},t.createElement(x,{type:w?"button":void 0,onClick:w?P:void 0,className:I("group flex w-fit cursor-default items-center gap-2",{"cursor-pointer":w})},Ne(g.column.columnDef.header,g.getContext()),w&&t.createElement(Ye,{direction:S})))})))),t.createElement(V.Body,{className:"border-b-0 border-t-0"},i.getRowModel().rows.map(h=>t.createElement(V.Row,{key:h.id,onMouseEnter:()=>e.current=h.id,onMouseLeave:()=>e.current=null,onClick:g=>{var b;return(b=i.onRowClick)===null||b===void 0?void 0:b.call(i,g,h)},className:I("group/row last-of-type:border-b-0",{"cursor-pointer":!!i.onRowClick})},h.getVisibleCells().map((g,b)=>{const w=g.column.id==="select",S=g.column.id==="action",P=w||S,y=c?b===1:b===0;return t.createElement(V.Cell,{key:g.id,className:I("items-stretch truncate whitespace-nowrap",{"w-[calc(20px+24px+24px)] min-w-[calc(20px+24px+24px)] max-w-[calc(20px+24px+24px)]":w,"w-[calc(28px+24px+4px)] min-w-[calc(28px+24px+4px)] max-w-[calc(28px+24px+4px)]":S,"bg-ui-bg-base group-hover/row:bg-ui-bg-base-hover transition-fg sticky h-full":y||w,"after:absolute after:inset-y-0 after:right-0 after:h-full after:w-px after:bg-transparent after:content-['']":y,"after:bg-ui-border-base":l&&y,"left-0":w||y&&!c,"left-[calc(20px+24px+24px)]":y&&c}),style:P?void 0:{width:g.column.columnDef.size,maxWidth:g.column.columnDef.maxSize,minWidth:g.column.columnDef.minSize}},Ne(g.column.columnDef.cell,g.getContext()))})))))),t.createElement(It,{state:i.emptyState,props:n.emptyState}))};Je.displayName="DataTable.Table";const At=({heading:n,description:e})=>t.createElement("div",{className:"flex size-full flex-col items-center justify-center gap-2"},t.createElement(Ce,{size:"base",weight:"plus"},n),t.createElement(Ce,null,e)),It=({state:n,props:e})=>{var a;if(n===U.POPULATED)return null;const l=n===U.EMPTY?e==null?void 0:e.empty:e==null?void 0:e.filtered;return t.createElement("div",{className:"flex min-h-[250px] w-full flex-1 flex-col items-center justify-center border-y px-6 py-4"},(a=l==null?void 0:l.custom)!==null&&a!==void 0?a:t.createElement(At,{heading:l==null?void 0:l.heading,description:l==null?void 0:l.description}))},$t=({pageSize:n=10})=>t.createElement("div",{className:"flex w-full flex-1 flex-col overflow-hidden"},t.createElement("div",{className:"min-h-0 w-full flex-1 overscroll-none border-y"},t.createElement("div",{className:"flex flex-col divide-y"},t.createElement(O,{className:"h-12 w-full"}),Array.from({length:n},(e,a)=>a).map(e=>t.createElement(O,{key:e,className:"h-12 w-full rounded-none"})))));function jt(){const n=document?document.activeElement:null;return n instanceof HTMLInputElement||n instanceof HTMLTextAreaElement||(n==null?void 0:n.getAttribute("contenteditable"))==="true"}function Le(n){if(typeof n!="object"||n===null)return!1;const e=["$gte","$lte","$gt","$lt"],a=e.some(r=>r in n),l=Object.entries(n).every(([r,o])=>e.includes(r)&&(typeof o=="string"||o===void 0));return a&&l}const Rt=n=>n.toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"}),Ot="Custom",qe="Starting",Ze="Ending",Ge=({id:n,filter:e})=>{const{instance:a}=z(),[l,r]=t.useState(e===void 0),[o,i]=t.useState(!1),p=t.useCallback(S=>{!S&&(!e||Array.isArray(e)&&e.length===0)&&a.removeFilter(n),r(S)},[a,n,e]),s=t.useCallback(()=>{a.removeFilter(n)},[a,n]),c=a.getFilterMeta(n),{type:u,options:C,label:h,...g}=c??{},{displayValue:b,isCustomRange:w}=t.useMemo(()=>{var S,P,y,A,D;let x=null,N=!1;if(typeof e=="string"&&(x=(P=(S=C==null?void 0:C.find(d=>d.value===e))===null||S===void 0?void 0:S.label)!==null&&P!==void 0?P:null),Array.isArray(e)&&(x=(y=e.map(d=>{var k;return(k=C==null?void 0:C.find($=>$.value===d))===null||k===void 0?void 0:k.label}).join(", "))!==null&&y!==void 0?y:null),Le(e)&&(x=(D=(A=C==null?void 0:C.find(d=>Le(d.value)?!o&&(e.$gte===d.value.$gte||!e.$gte&&!d.value.$gte)&&(e.$lte===d.value.$lte||!e.$lte&&!d.value.$lte)&&(e.$gt===d.value.$gt||!e.$gt&&!d.value.$gt)&&(e.$lt===d.value.$lt||!e.$lt&&!d.value.$lt):!1))===null||A===void 0?void 0:A.label)!==null&&D!==void 0?D:null,!x&&Vt(c))){const d=c.formatDateValue?c.formatDateValue:Rt;e.$gte&&!e.$lte&&(N=!0,x=`${c.rangeOptionStartLabel||qe} ${d(new Date(e.$gte))}`),e.$lte&&!e.$gte&&(N=!0,x=`${c.rangeOptionEndLabel||Ze} ${d(new Date(e.$lte))}`),e.$gte&&e.$lte&&(N=!0,x=`${d(new Date(e.$gte))} - ${d(new Date(e.$lte))}`)}return{displayValue:x,isCustomRange:N}},[e,C]);return t.useEffect(()=>{w&&!o&&i(!0)},[w,o]),c?t.createElement(le,{open:l,onOpenChange:p,modal:!0},t.createElement(le.Anchor,{asChild:!0},t.createElement("div",{className:I("bg-ui-bg-component flex flex-shrink-0 items-center overflow-hidden rounded-md","[&>*]:txt-compact-small-plus [&>*]:flex [&>*]:items-center [&>*]:justify-center",{"shadow-borders-base divide-x":b,"border border-dashed":!b})},b&&t.createElement("div",{className:"text-ui-fg-muted whitespace-nowrap px-2 py-1"},h||n),t.createElement(le.Trigger,{className:I("text-ui-fg-subtle hover:bg-ui-bg-base-hover active:bg-ui-bg-base-pressed transition-fg whitespace-nowrap px-2 py-1 outline-none",{"text-ui-fg-muted":!b})},b||h||n),b&&t.createElement("button",{type:"button",className:"text-ui-fg-muted hover:bg-ui-bg-base-hover active:bg-ui-bg-base-pressed transition-fg size-7 outline-none",onClick:s},t.createElement(dt,null)))),t.createElement(le.Content,{align:"start",className:"bg-ui-bg-component p-0 outline-none"},(()=>{switch(u){case"select":return t.createElement(Ht,{id:n,filter:e,options:C});case"radio":return t.createElement(Bt,{id:n,filter:e,options:C});case"date":return t.createElement(zt,{id:n,filter:e,options:C,isCustom:o,setIsCustom:i,...g});default:return null}})())):null};Ge.displayName="DataTable.Filter";const zt=({id:n,filter:e,options:a,format:l="date",rangeOptionLabel:r=Ot,rangeOptionStartLabel:o=qe,rangeOptionEndLabel:i=Ze,disableRangeOption:p=!1,isCustom:s,setIsCustom:c})=>{const u=e,{instance:C}=z(),h=t.useMemo(()=>{if(!(!u||s))return JSON.stringify(u)},[u,s]),g=t.useCallback(d=>{c(!1);const k=JSON.parse(d);C.updateFilter({id:n,value:k})},[C,n]),b=t.useCallback(()=>{c(!0),C.updateFilter({id:n,value:void 0})},[C,n]),w=t.useCallback((d,k)=>{const $={...u};$[d]=k?k.toISOString():void 0,C.updateFilter({id:n,value:$})},[C,n]),{focusedIndex:S,setFocusedIndex:P}=ye(a,d=>{d===a.length&&!p?b():g(JSON.stringify(a[d].value))},p?0:1),y=l==="date-time"?"minute":"day",A=u!=null&&u.$lte?y==="minute"?new Date(u.$lte):new Date(new Date(u.$lte).setHours(23,59,59,999)):void 0,D=u!=null&&u.$gte?y==="minute"?new Date(u.$gte):new Date(new Date(u.$gte).setHours(0,0,0,0)):void 0,x=s?a.length:0,N=t.useCallback(()=>{S===-1&&P(x)},[S,x]);return t.createElement(t.Fragment,null,t.createElement("div",{className:"flex flex-col p-1 outline-none",tabIndex:0,role:"list",onFocus:N,autoFocus:!0},a.map((d,k)=>{const $=JSON.stringify(d.value),J=h===$;return t.createElement(se,{key:k,index:k,option:d,isSelected:J,isFocused:S===k,onClick:()=>g($),onMouseEvent:P,icon:Se})}),!p&&t.createElement(se,{index:a.length,option:{label:r,value:"__custom"},icon:Se,isSelected:s,isFocused:S===a.length,onClick:b,onMouseEvent:P})),!p&&s&&t.createElement(t.Fragment,null,t.createElement("div",{className:"flex flex-col py-[3px]"},t.createElement("div",{className:"bg-ui-border-menu-top h-px w-full"}),t.createElement("div",{className:"bg-ui-border-menu-bot h-px w-full"})),t.createElement("div",{className:"flex flex-col gap-2 px-2 pb-3 pt-1"},t.createElement("div",{className:"flex flex-col gap-1"},t.createElement(ke,{id:"custom-start-date-label",size:"xsmall",weight:"plus"},o),t.createElement(_e,{"aria-labelledby":"custom-start-date-label",granularity:y,maxValue:A,value:u!=null&&u.$gte?new Date(u.$gte):null,onChange:d=>w("$gte",d)})),t.createElement("div",{className:"flex flex-col gap-1"},t.createElement(ke,{id:"custom-end-date-label",size:"xsmall",weight:"plus"},i),t.createElement(_e,{"aria-labelledby":"custom-end-date-label",granularity:y,minValue:D,value:u!=null&&u.$lte?new Date(u.$lte):null,onChange:d=>w("$lte",d)})))))},Ht=({id:n,filter:e=[],options:a})=>{const{instance:l}=z(),r=t.useCallback(s=>{if(e!=null&&e.includes(s)){const c=e==null?void 0:e.filter(u=>u!==s);l.updateFilter({id:n,value:c})}else l.updateFilter({id:n,value:[...e??[],s]})},[l,n,e]),{focusedIndex:o,setFocusedIndex:i}=ye(a,s=>r(a[s].value)),p=t.useCallback(()=>{o===-1&&i(0)},[o]);return t.createElement("div",{className:"flex flex-col p-1 outline-none",role:"list",tabIndex:0,onFocus:p,autoFocus:!0},a.map((s,c)=>{const u=!!(e!=null&&e.includes(s.value));return t.createElement(se,{key:c,index:c,option:s,isSelected:u,isFocused:o===c,onClick:()=>r(s.value),onMouseEvent:i,icon:ft})}))},Bt=({id:n,filter:e,options:a})=>{const{instance:l}=z(),r=t.useCallback(s=>{l.updateFilter({id:n,value:s})},[l,n]),{focusedIndex:o,setFocusedIndex:i}=ye(a,s=>r(a[s].value)),p=t.useCallback(()=>{o===-1&&i(0)},[o]);return t.createElement("div",{className:"flex flex-col p-1 outline-none",role:"list",tabIndex:0,onFocus:p,autoFocus:!0},a.map((s,c)=>{const u=e===s.value;return t.createElement(se,{key:c,index:c,option:s,isSelected:u,isFocused:o===c,onClick:()=>r(s.value),onMouseEvent:i,icon:Se})}))};function Vt(n){return n?n.type==="date":!1}const se=t.memo(({index:n,option:e,isSelected:a,isFocused:l,onClick:r,onMouseEvent:o,icon:i})=>t.createElement("button",{type:"button",role:"listitem",className:I("bg-ui-bg-component txt-compact-small transition-fg flex items-center gap-2 rounded px-2 py-1 outline-none",{"bg-ui-bg-component-hover":l}),onClick:r,onMouseEnter:()=>o(n),onMouseLeave:()=>o(-1),tabIndex:-1},t.createElement("div",{className:"flex size-[15px] items-center justify-center"},a&&t.createElement(i,null)),t.createElement("span",null,e.label)));function ye(n,e,a=0){const[l,r]=t.useState(-1),o=t.useCallback(i=>{const p=n.length+a;if(document.activeElement.contentEditable!=="true")switch(i.key){case"ArrowDown":i.preventDefault(),r(s=>s<p-1?s+1:s);break;case"ArrowUp":i.preventDefault(),r(s=>s>0?s-1:s);break;case" ":case"Enter":i.preventDefault(),l>=0&&e(l);break}},[n.length,a,l,e]);return t.useEffect(()=>(window.addEventListener("keydown",o),()=>{window.removeEventListener("keydown",o)}),[o]),{focusedIndex:l,setFocusedIndex:r}}const Qe=({clearAllFiltersLabel:n="Clear all"})=>{const{instance:e}=z(),a=e.getFiltering(),l=t.useCallback(()=>{e.clearFilters()},[e]),r=Object.keys(a).length;return r===0?null:e.showSkeleton?t.createElement(Ut,{filterCount:r}):t.createElement("div",{className:"bg-ui-bg-subtle flex w-full flex-nowrap items-center gap-2 overflow-x-auto border-t px-6 py-2 md:flex-wrap"},Object.entries(a).map(([o,i])=>t.createElement(Ge,{key:o,id:o,filter:i})),r>0?t.createElement(we,{variant:"transparent",size:"small",className:"text-ui-fg-muted hover:text-ui-fg-subtle flex-shrink-0 whitespace-nowrap",type:"button",onClick:l},n):null)};Qe.displayName="DataTable.FilterBar";const Ut=({filterCount:n})=>t.createElement("div",{className:"bg-ui-bg-subtle flex w-full flex-nowrap items-center gap-2 overflow-x-auto border-t px-6 py-2 md:flex-wrap"},Array.from({length:n}).map((e,a)=>t.createElement(O,{key:a,className:"h-7 w-[180px]"})),n>0?t.createElement(O,{className:"h-7 w-[66px]"}):null),Kt=n=>{var e;return t.createElement("div",{className:"flex flex-col divide-y"},t.createElement("div",{className:I("flex items-center px-6 py-4",n.className)},n.children),t.createElement(Qe,{clearAllFiltersLabel:(e=n.translations)===null||e===void 0?void 0:e.clearAll}))},Wt=({instance:n,children:e})=>t.createElement(He.Provider,{value:{instance:n}},e),Xe=({instance:n,children:e,className:a})=>t.createElement(Wt,{instance:n},t.createElement("div",{className:I("relative flex min-h-0 flex-1 flex-col",a)},e));Xe.displayName="DataTable";const H=Object.assign(Xe,{Table:Je,Toolbar:Kt,Search:Ke,SortingMenu:We,FilterMenu:Ve,Pagination:Ue,CommandBar:Be}),Yt=({rowCount:n=0,filters:e,commands:a,rowSelection:l,sorting:r,filtering:o,pagination:i,search:p,onRowClick:s,autoResetPageIndex:c=!0,isLoading:u=!1,...C})=>{var h,g,b,w,S,P;const{state:y,onSortingChange:A}=r??{},{state:D,onFilteringChange:x}=o??{},{state:N,onPaginationChange:d}=i??{},{state:k,onRowSelectionChange:$,enableRowSelection:J}=l??{},_=t.useCallback(()=>c?()=>N&&(d==null?void 0:d({...N,pageIndex:0})):void 0,[c,N,d]),ie=t.useCallback(()=>A?f=>{var m;(m=_())===null||m===void 0||m(),Jt(A,y)(f)}:void 0,[A,y,_]),ce=t.useCallback(()=>$?f=>{var m;(m=_())===null||m===void 0||m(),qt($,k)(f)}:void 0,[$,k,_]),De=t.useCallback(()=>x?f=>{var m;(m=_())===null||m===void 0||m(),Zt(x,D)(f)}:void 0,[x,D,_]),q=t.useCallback(()=>d?Gt(d,N):void 0,[d,N]),T=xt({...C,getCoreRowModel:Et(),state:{rowSelection:k??{},sorting:y?[y]:void 0,columnFilters:Object.entries(D??{}).map(([f,m])=>({id:f,value:m})),pagination:N},enableRowSelection:J,rowCount:n,onColumnFiltersChange:De(),onRowSelectionChange:ce(),onSortingChange:ie(),onPaginationChange:q(),manualSorting:!0,manualPagination:!0,manualFiltering:!0}),ue=t.useCallback(()=>{var f,m;return(m=(f=T.getState().sorting)===null||f===void 0?void 0:f[0])!==null&&m!==void 0?m:null},[T]),de=t.useCallback(f=>{var m,M,xe;const it=(M=(m=T.getState().sorting)===null||m===void 0?void 0:m[0])!==null&&M!==void 0?M:null,ct=typeof f=="function"?f(it):f;(xe=_())===null||xe===void 0||xe(),T.setSorting([ct])},[T,_]),K=t.useCallback(()=>e??[],[e]),fe=t.useCallback(f=>{const m=K().find(M=>M.id===f);return m?m.options:null},[K]),me=t.useCallback(f=>K().find(m=>m.id===f)||null,[K]),W=t.useCallback(()=>{var f;const m=(f=T.getState().columnFilters)!==null&&f!==void 0?f:[];return Object.fromEntries(m.map(M=>[M.id,M.value]))},[T]),Q=t.useCallback(f=>{var m;f.value&&((m=_())===null||m===void 0||m()),x==null||x({...W(),[f.id]:f.value})},[x,W,_]),ge=t.useCallback(f=>{var m;const M=W();delete M[f],(m=_())===null||m===void 0||m(),x==null||x(M)},[x,W,_]),be=t.useCallback(()=>{var f;(f=_())===null||f===void 0||f(),x==null||x({})},[x,_]),pe=t.useCallback(f=>{Q(f)},[Q]),{state:R,onSearchChange:Z,debounce:X=300}=p??{},[ee,te]=t.useState(R??""),Y=t.useRef();t.useEffect(()=>{te(R??"")},[R]);const he=t.useCallback(()=>ee,[ee]),E=t.useMemo(()=>{if(Z)return f=>{var m;if(Y.current&&clearTimeout(Y.current),X<=0){(m=_())===null||m===void 0||m(),Z(f);return}Y.current=setTimeout(()=>{var M;(M=_())===null||M===void 0||M(),Z(f)},X)}},[Z,X,_]);t.useEffect(()=>()=>{Y.current&&clearTimeout(Y.current)},[]);const F=t.useCallback(f=>{te(f),E==null||E(f)},[E]),j=t.useCallback(()=>a??[],[a]),ne=t.useCallback(()=>T.getState().rowSelection,[T]),ae=T.getRowModel().rows,nt=t.useMemo(()=>{const f=ae.length>0,m=!!R,M=Object.keys(D??{}).length>0;return f?U.POPULATED:m||M?U.FILTERED_EMPTY:U.EMPTY},[ae,R,D]),at=t.useMemo(()=>u===!0&&ae.length===0,[u,ae]),lt=!!i,rt=!!o,st=!!r,ot=!!p;return{getHeaderGroups:T.getHeaderGroups,getRowModel:T.getRowModel,getAllColumns:T.getAllColumns,enablePagination:lt,getCanNextPage:T.getCanNextPage,getCanPreviousPage:T.getCanPreviousPage,nextPage:T.nextPage,previousPage:T.previousPage,getPageCount:T.getPageCount,pageIndex:(b=(g=(h=T.getState())===null||h===void 0?void 0:h.pagination)===null||g===void 0?void 0:g.pageIndex)!==null&&b!==void 0?b:0,pageSize:(P=(S=(w=T.getState())===null||w===void 0?void 0:w.pagination)===null||S===void 0?void 0:S.pageSize)!==null&&P!==void 0?P:10,rowCount:n,enableSearch:ot,getSearch:he,onSearchChange:F,enableSorting:st,getSorting:ue,setSorting:de,enableFiltering:rt,getFilters:K,getFilterOptions:fe,getFilterMeta:me,getFiltering:W,addFilter:Q,removeFilter:ge,clearFilters:be,updateFilter:pe,getCommands:j,getRowSelection:ne,onRowClick:s,emptyState:nt,isLoading:u,showSkeleton:at}};function Jt(n,e){return a=>{const r=(typeof a=="function"?a(e?[e]:[]):a)[0];n(r)}}function qt(n,e){return a=>{const l=typeof a=="function"?a(e??{}):a;n(l)}}function Zt(n,e){return a=>{const l=typeof a=="function"?a(Object.entries(e??{}).map(([o,i])=>({id:o,value:i}))):a,r=Object.fromEntries(l.map(o=>[o.id,o]));n(r)}}function Gt(n,e){return a=>{const l=typeof a=="function"?a(e??{pageIndex:0,pageSize:10}):a;n(l)}}const et=({ctx:n})=>{const e=n.column.columnDef.meta,a=e==null?void 0:e.___actions;if(!a)return null;const l=typeof a=="function"?a(n):a;return Array.isArray(l)?t.createElement(L,null,t.createElement(L.Trigger,{asChild:!0,className:"ml-1"},t.createElement(ve,{size:"small",variant:"transparent"},t.createElement(mt,null))),t.createElement(L.Content,{side:"bottom"},l.map((r,o)=>{const i=Array.isArray(r),p=o===l.length-1;return i?t.createElement(t.Fragment,{key:o},r.map(s=>t.createElement(L.Item,{key:s.label,onClick:c=>{c.stopPropagation(),s.onClick(n)},className:"[&>svg]:text-ui-fg-subtle flex items-center gap-2"},s.icon,s.label)),!p&&t.createElement(L.Separator,null)):t.createElement(L.Item,{key:r.label,onClick:s=>{s.stopPropagation(),r.onClick(n)},className:"[&>svg]:text-ui-fg-subtle flex items-center gap-2"},r.icon,r.label)}))):null};et.displayName="DataTable.ActionCell";const tt=n=>{const e=n.ctx.row.getIsSelected(),a=n.ctx.row.getToggleSelectedHandler();return t.createElement($e,{onClick:l=>l.stopPropagation(),checked:e,onCheckedChange:a})};tt.displayName="DataTable.SelectCell";const Qt=n=>{const e=n.ctx.table.getIsSomePageRowsSelected()?"indeterminate":n.ctx.table.getIsAllPageRowsSelected(),a=l=>{n.ctx.table.toggleAllPageRowsSelected(!!l)};return t.createElement($e,{onClick:l=>l.stopPropagation(),checked:e,onCheckedChange:a})},En=()=>{const{accessor:n,display:e}=je();return{accessor:(a,l)=>{const{sortLabel:r,sortAscLabel:o,sortDescLabel:i,meta:p,enableSorting:s,...c}=l,u={___sortMetaData:{sortLabel:r,sortAscLabel:o,sortDescLabel:i},...p||{}};return n(a,{...c,enableSorting:s??!1,meta:u})},display:e,action:({actions:a,...l})=>e({id:"action",cell:r=>t.createElement(et,{ctx:r}),meta:{___actions:a,...l.meta||{}},...l}),select:a=>e({id:"select",header:a!=null&&a.header?a.header:l=>t.createElement(Qt,{ctx:l}),cell:a!=null&&a.cell?a.cell:l=>t.createElement(tt,{ctx:l})})}},Xt=je();Xt.accessor("name",{meta:{}});const en=()=>({accessor:(n,e)=>({id:n,...e}),custom:n=>n});var Cn=({data:n=[],columns:e,filters:a,commands:l,action:r,actionMenu:o,getRowId:i,rowCount:p=0,enablePagination:s=!0,enableSearch:c=!0,autoFocusSearch:u=!1,rowHref:C,heading:h,subHeading:g,prefix:b,pageSize:w=10,emptyState:S,rowSelection:P,isLoading:y=!1,layout:A="auto"})=>{const{t:D}=oe(),x=a&&a.length>0,N=l&&l.length>0,d=e.some(E=>E.enableSorting),k=(a==null?void 0:a.map(E=>E.id))??[],$=k.map(E=>B(E,b)),{offset:J,order:_,q:ie,...ce}=Ct([...k,...d?["order"]:[],...c?["q"]:[],...s?["offset"]:[]],b),[De,q]=gt(),[T,ue]=t.useState(ie??""),de=E=>{ue(E),q(F=>(E?F.set(B("q",b),E):F.delete(B("q",b)),F))},[K,fe]=t.useState(J?ln(J,w):{pageIndex:0,pageSize:w}),me=E=>{fe(E),q(F=>(E.pageIndex===0?F.delete(B("offset",b)):F.set(B("offset",b),an(E).toString()),F))},[W,Q]=t.useState(rn(k,ce)),ge=E=>{Q(E),q(F=>(Array.from(F.keys()).forEach(j=>{$.includes(j)&&!(j in E)&&F.delete(j)}),Object.entries(E).forEach(([j,ne])=>{$.includes(B(j,b))&&ne&&F.set(B(j,b),JSON.stringify(ne))}),F))},[be,pe]=t.useState(_?nn(_):null),R=E=>{pe(E),q(F=>{if(E){const j=tn(E);F.set(B("order",b),j)}else F.delete(B("order",b));return F})},{pagination:Z,toolbar:X}=sn(),ee=bt(),te=t.useCallback((E,F)=>{if(!C)return;const j=C(F);if(E.metaKey||E.ctrlKey||E.button===1){window.open(j,"_blank","noreferrer");return}if(E.shiftKey){window.open(j,void 0,"noreferrer");return}ee(j)},[ee,C]),Y=Yt({data:n,columns:e,filters:a,commands:l,rowCount:p,getRowId:i,onRowClick:C?te:void 0,pagination:s?{state:K,onPaginationChange:me}:void 0,filtering:x?{state:W,onFilteringChange:ge}:void 0,sorting:d?{state:be,onSortingChange:R}:void 0,search:c?{state:T,onSearchChange:de}:void 0,rowSelection:P,isLoading:y}),he=h||g;return v.jsxs(H,{instance:Y,className:I({"h-full [&_tr]:last-of-type:!border-b":A==="fill"}),children:[v.jsxs(H.Toolbar,{className:"flex flex-col items-start justify-between gap-2 md:flex-row md:items-center",translations:X,children:[v.jsxs("div",{className:"flex w-full items-center justify-between gap-2",children:[he&&v.jsxs("div",{children:[h&&v.jsx(pt,{children:h}),g&&v.jsx(Ce,{size:"small",className:"text-ui-fg-subtle",children:g})]}),v.jsxs("div",{className:"flex items-center justify-end gap-x-2 md:hidden",children:[x&&v.jsx(H.FilterMenu,{tooltip:D("filters.filterLabel")}),v.jsx(H.SortingMenu,{tooltip:D("filters.sortLabel")}),o&&v.jsx(Te,{variant:"primary",...o}),r&&v.jsx(Me,{...r})]})]}),v.jsxs("div",{className:"flex w-full items-center gap-2 md:justify-end",children:[c&&v.jsx("div",{className:"w-full md:w-auto",children:v.jsx(H.Search,{placeholder:D("filters.searchLabel"),autoFocus:u})}),v.jsxs("div",{className:"hidden items-center gap-x-2 md:flex",children:[x&&v.jsx(H.FilterMenu,{tooltip:D("filters.filterLabel")}),v.jsx(H.SortingMenu,{tooltip:D("filters.sortLabel")}),o&&v.jsx(Te,{variant:"primary",...o}),r&&v.jsx(Me,{...r})]})]})]}),v.jsx(H.Table,{emptyState:S}),s&&v.jsx(H.Pagination,{translations:Z}),N&&v.jsx(H.CommandBar,{selectedLabel:E=>`${E} selected`})]})};function tn(n){return n.desc?`-${n.id}`:n.id}function nn(n){return n.startsWith("-")?{id:n.slice(1),desc:!0}:{id:n,desc:!1}}function an(n){return n.pageIndex*n.pageSize}function ln(n,e){const a=parseInt(n);return{pageIndex:Math.floor(a/e),pageSize:e}}function rn(n,e){if(!e)return{};const a={};for(const l of n){const r=e[l];r&&(a[l]=JSON.parse(r))}return a}function B(n,e){return e?`${e}_${n}`:n}var sn=()=>{const{t:n}=oe(),e={of:n("general.of"),results:n("general.results"),pages:n("general.pages"),prev:n("general.prev"),next:n("general.next")},a={clearAll:n("actions.clearAll")};return{pagination:e,toolbar:a}},Me=({label:n,disabled:e,...a})=>{const l={size:"small",disabled:e??!1,type:"button",variant:"secondary"};return"to"in a?v.jsx(we,{...l,asChild:!0,children:v.jsx(ht,{to:a.to,children:n})}):v.jsx(we,{...l,onClick:a.onClick,children:n})},Ae=en(),on=()=>{const{t:n}=oe(),e=t.useMemo(()=>{const a=new Date;return a.setHours(0,0,0,0),a},[]);return t.useMemo(()=>[{label:n("filters.date.today"),value:{$gte:e.toISOString()}},{label:n("filters.date.lastSevenDays"),value:{$gte:Ee(e,7).toISOString()}},{label:n("filters.date.lastThirtyDays"),value:{$gte:Ee(e,30).toISOString()}},{label:n("filters.date.lastNinetyDays"),value:{$gte:Ee(e,90).toISOString()}},{label:n("filters.date.lastTwelveMonths"),value:{$gte:wt(e,12).toISOString()}}],[e,n])},Sn=n=>{const{t:e}=oe(),{getFullDate:a}=St(),l=on(),r=t.useMemo(()=>({rangeOptionStartLabel:e("filters.date.starting"),rangeOptionEndLabel:e("filters.date.ending"),rangeOptionLabel:e("filters.date.custom"),options:l}),[n,e,l]);return t.useMemo(()=>[Ae.accessor("created_at",{type:"date",label:e("fields.createdAt"),format:"date",formatDateValue:o=>a({date:o}),options:l,...r}),Ae.accessor("updated_at",{type:"date",label:e("fields.updatedAt"),format:"date",formatDateValue:o=>a({date:o}),options:l,...r})],[e,l,a,r])};export{Cn as D,en as a,En as c,Sn as u};
