import{u as g}from"./chunk-6CNRNROJ-Cvp6AfPW.js";import{C as j}from"./chunk-W6N53UNG-BUeeAVFO.js";import{K as P}from"./chunk-6HTZNHPT-BAw8hsS0.js";import{b as i,u as _}from"./chunk-AYRG2MQL-p8d_KfEl.js";import{P as b}from"./chunk-ZVVQK46Y-BRmCbG4g.js";import{a1 as y,a3 as S,R as C,b as m,Q as v,j as s,H as F,a8 as E,a9 as T,U as D,t as h,w as n,B as u,s as L}from"./index-DkzW1lbC.js";import"./x-mark-mini-bZP8SCsT.js";import"./triangles-mini-7BXnDNsU.js";import"./plus-mini-CrzVgHGc.js";import"./prompt-PHMJs5xL.js";var N=y({shipping_profile_id:S()}),R=({product:l})=>{var d;const{t:r}=m(),{handleSuccess:p}=_(),o=g({queryKey:["shipping_profiles"],queryFn:e=>L.admin.shippingProfile.list(e),getOptions:e=>e.shipping_profiles.map(a=>({label:a.name,value:a.id}))}),t=E({defaultValues:{shipping_profile_id:((d=l.shipping_profile)==null?void 0:d.id)??""},resolver:T(N)}),{mutateAsync:c,isPending:f}=D(l.id),x=t.handleSubmit(async e=>{await c({shipping_profile_id:e.shipping_profile_id},{onSuccess:({product:a})=>{h.success(r("products.shippingProfile.edit.toasts.success",{title:a.title})),p()},onError:a=>{h.error(a.message)}})});return s.jsx(i.Form,{form:t,children:s.jsxs(P,{onSubmit:x,className:"flex h-full flex-col",children:[s.jsx(i.Body,{children:s.jsx("div",{className:"flex h-full flex-col gap-y-4",children:s.jsx(n.Field,{control:t.control,name:"shipping_profile_id",render:({field:e})=>s.jsxs(n.Item,{children:[s.jsx(n.Label,{children:r("products.fields.shipping_profile.label")}),s.jsx(n.Control,{children:s.jsx(j,{...e,options:o.options,searchValue:o.searchValue,onSearchValueChange:o.onSearchValueChange,fetchNextPage:o.fetchNextPage})}),s.jsx(n.ErrorMessage,{})]})})})}),s.jsx(i.Footer,{children:s.jsxs("div",{className:"flex items-center justify-end gap-x-2",children:[s.jsx(i.Close,{asChild:!0,children:s.jsx(u,{size:"small",variant:"secondary",children:r("actions.cancel")})}),s.jsx(u,{size:"small",type:"submit",isLoading:f,children:r("actions.save")})]})})]})})},M=()=>{const{id:l}=C(),{t:r}=m(),{product:p,isLoading:o,isError:t,error:c}=v(l,{fields:b});if(t)throw c;return s.jsxs(i,{children:[s.jsx(i.Header,{children:s.jsx(i.Title,{asChild:!0,children:s.jsx(F,{children:r("products.shippingProfile.edit.header")})})}),!o&&p&&s.jsx(R,{product:p})]})};export{M as Component};
